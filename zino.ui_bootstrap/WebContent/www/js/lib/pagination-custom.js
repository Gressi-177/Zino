!function(a,e){void 0===e&&n("Pagination requires jQuery.");var t="pagination",o="__pagination-";e.fn.pagination&&(t="pagination2"),e.fn[t]=function(r){if(void 0===r)return this;var s,l,c=e(this),u=e.extend({},e.fn[t].defaults,r),g={initialize:function(){var a=this;if(c.data("pagination")||c.data("pagination",{}),!1!==a.callHook("beforeInit")){c.data("pagination").initialized&&e(".paginationjs",c).remove(),a.disabled=!!u.disabled;var t=a.model={pageRange:u.pageRange,pageSize:u.pageSize,totalNumber:u.totalNumber};a.parseDataSource(u.dataSource,(function(e){if(a.isAsync=i.isString(e),u.isNoAjax?i.isArray(e)&&(t.totalNumber=u.totalNumber):i.isArray(e)&&(t.totalNumber=u.totalNumber=e.length),a.isDynamicTotalNumber=a.isAsync&&u.totalNumberLocator,!(u.hideWhenLessThanOnePage&&a.getTotalPage()<=1)){var o=a.render(!0);u.className&&o.addClass(u.className),t.el=o,c["bottom"===u.position?"append":"prepend"](o),a.observer(),c.data("pagination").initialized=!0,a.callHook("afterInit",o)}}))}},render:function(a){var t=this,o=t.model,i=o.el||e('<div class="paginationjs"></div>'),n=!0!==a;t.callHook("beforeRender",n);var r=o.pageNumber||u.pageNumber,s=u.pageRange,l=t.getTotalPage(),c=r-s,g=r+s;return g>l&&(g=l,c=(c=l-2*s)<1?1:c),c<=1&&(c=1,g=Math.min(2*s+1,l)),i.html(t.generateHTML({currentPage:r,pageRange:s,rangeStart:c,rangeEnd:g})),t.callHook("afterRender",n),i},generateHTML:function(a){var t,o=this,i=a.currentPage,n=o.getTotalPage(),r=a.rangeStart,s=a.rangeEnd,l=o.getTotalNumber(),c=u.showPrevious,g=u.showNext,d=u.showPageNumbers,p=u.showNavigator,f=u.showGoInput,m=u.showGoButton,b=u.pageLink,h=u.prevText,v=u.nextText,N=u.ellipsisText,y=u.goButtonText,k=u.classPrefix,P=u.activeClassName,j=u.disableClassName,x=u.ulClassName,S="",T='<input type="text" class="J-paginationjs-go-pagenumber">',C='<input type="button" class="J-paginationjs-go-button" value="'+y+'">',w=e.isFunction(u.formatNavigator)?u.formatNavigator(i,n,l):u.formatNavigator,H=e.isFunction(u.formatGoInput)?u.formatGoInput(T,i,n,l):u.formatGoInput,A=e.isFunction(u.formatGoButton)?u.formatGoButton(C,i,n,l):u.formatGoButton,F=e.isFunction(u.autoHidePrevious)?u.autoHidePrevious():u.autoHidePrevious,O=e.isFunction(u.autoHideNext)?u.autoHideNext():u.autoHideNext,D=e.isFunction(u.header)?u.header(i,n,l):u.header,L=e.isFunction(u.footer)?u.footer(i,n,l):u.footer;if(D&&(S+=o.replaceVariables(D,{currentPage:i,totalPage:n,totalNumber:l})),c||d||g){if(S+='<div class="paginationjs-pages">',S+=x?'<ul class="'+x+'">':"<ul>",c&&(i<=1?F||(S+='<li class="'+k+"-prev "+j+'"><a>'+h+"</a></li>"):S+='<li class="'+k+'-prev J-paginationjs-previous" data-num="'+(i-1)+'" title="Previous page"><a href="'+b+'">'+h+"</a></li>"),d){if(r<=3)for(t=1;t<r;t++)S+=t==i?'<li class="'+k+"-page J-paginationjs-page "+P+'" data-num="'+t+'"><a>'+t+"</a></li>":'<li class="'+k+'-page J-paginationjs-page" data-num="'+t+'"><a href="'+b+'">'+t+"</a></li>";else u.showFirstOnEllipsisShow&&(S+='<li class="'+k+"-page "+k+'-first J-paginationjs-page" data-num="1"><a href="'+b+'">1</a></li>'),S+='<li class="'+k+"-ellipsis "+j+'"><a>'+N+"</a></li>";for(t=r;t<=s;t++)S+=t==i?'<li class="'+k+"-page J-paginationjs-page "+P+'" data-num="'+t+'"><a>'+t+"</a></li>":'<li class="'+k+'-page J-paginationjs-page" data-num="'+t+'"><a href="'+b+'">'+t+"</a></li>";if(s>=n-2)for(t=s+1;t<=n;t++)S+='<li class="'+k+'-page J-paginationjs-page" data-num="'+t+'"><a href="'+b+'">'+t+"</a></li>";else S+='<li class="'+k+"-ellipsis "+j+'"><a>'+N+"</a></li>",u.showLastOnEllipsisShow&&(S+='<li class="'+k+"-page "+k+'-last J-paginationjs-page" data-num="'+n+'"><a href="'+b+'">'+n+"</a></li>")}g&&(i>=n?O||(S+='<li class="'+k+"-next "+j+'"><a>'+v+"</a></li>"):S+='<li class="'+k+'-next J-paginationjs-next" data-num="'+(i+1)+'" title="Next page"><a href="'+b+'">'+v+"</a></li>"),S+="</ul></div>",App.data.beginPagination=a.currentPage}return p&&w&&(S+='<div class="'+k+'-nav J-paginationjs-nav">'+o.replaceVariables(w,{currentPage:i,totalPage:n,totalNumber:l})+"</div>"),f&&H&&(S+='<div class="'+k+'-go-input">'+o.replaceVariables(H,{currentPage:i,totalPage:n,totalNumber:l,input:T})+"</div>"),m&&A&&(S+='<div class="'+k+'-go-button">'+o.replaceVariables(A,{currentPage:i,totalPage:n,totalNumber:l,button:C})+"</div>"),L&&(S+=o.replaceVariables(L,{currentPage:i,totalPage:n,totalNumber:l})),S},findTotalNumberFromRemoteResponse:function(a){this.model.totalNumber=u.totalNumberLocator(a)},go:function(a,t){var o=this,n=o.model;if(!o.disabled){var r=a;if((r=parseInt(r))&&!(r<1)){var s=u.pageSize,l=o.getTotalNumber(),g=o.getTotalPage();if(!(l>0&&r>g))if(o.isAsync){var d={},p=u.alias||{};d[p.pageSize?p.pageSize:"pageSize"]=s,d[p.pageNumber?p.pageNumber:"pageNumber"]=r;var f=e.isFunction(u.ajax)?u.ajax():u.ajax?u.ajax:{},m={type:"get",cache:!1,data:{},contentType:"application/json; charset=UTF-8",dataType:"json",async:!0,url:u.dataSource,success:function(a){if(o.isDynamicTotalNumber){App.network.req_lc_DecodeUTF8(a);App.const.RES_DATA;a[App.const.SV_CODE]==App.const.SV_CODE_API_YES?(o.findTotalNumberFromRemoteResponse(a),o.model.dataCache[r-1]=a):a[App.const.SV_CODE]==App.const.SV_CODE_API_NO&&o.hide(),h(a)}else o.model.totalNumber=u.totalNumber,h(o.filterDataByLocator(a))},error:function(a,e,t){u.formatAjaxError&&u.formatAjaxError(a,e,t),o.enable()}};e.extend(!0,m,f),e.extend(m.data,d),m.data.begin=(r-1)*s,m.data.number=s,m.data.total=l,o.disable();var b=o.getDataCache(r-1);b?(console.log("---render from cache pageNumber ---"+r),h(b)):(console.log("---call ajax pageNumber ---"+r),m.data=JSON.stringify(m.data),e.ajax(m))}else h(o.getDataFragment(r))}}function h(a){if(!1===o.callHook("beforePaging",r))return!1;if(n.direction=void 0===n.pageNumber?0:r>n.pageNumber?1:-1,n.pageNumber=r,o.render(),o.disabled&&o.isAsync&&o.enable(),c.data("pagination").model=n,u.formatResult){var s=e.extend(!0,[],a);i.isArray(a=u.formatResult(s))||(a=s)}c.data("pagination").currentPageData=a,o.doCallback(a,t),o.callHook("afterPaging",r),1==r&&o.callHook("afterIsFirstPage"),r==o.getTotalPage()&&o.callHook("afterIsLastPage")}},doCallback:function(a,t){var o=this.model;e.isFunction(t)?t(a,o):e.isFunction(u.callback)&&u.callback(a,o)},destroy:function(){!1!==this.callHook("beforeDestroy")&&(this.model.el.remove(),c.off(),e("#paginationjs-style").remove(),this.callHook("afterDestroy"))},previous:function(a){this.go(this.model.pageNumber-1,a)},next:function(a){this.go(this.model.pageNumber+1,a)},disable:function(){var a=this,e=a.isAsync?"async":"sync";!1!==a.callHook("beforeDisable",e)&&(a.disabled=!0,a.model.disabled=!0,a.callHook("afterDisable",e))},enable:function(){var a=this,e=a.isAsync?"async":"sync";!1!==a.callHook("beforeEnable",e)&&(a.disabled=!1,a.model.disabled=!1,a.callHook("afterEnable",e))},refresh:function(a){this.go(this.model.pageNumber,a)},show:function(){this.model.el.is(":visible")||this.model.el.show()},hide:function(){this.model.el.is(":visible")&&this.model.el.hide()},replaceVariables:function(a,e){var t;for(var o in e){var i=e[o],n=new RegExp("<%=\\s*"+o+"\\s*%>","img");t=(t||a).replace(n,i)}return t},getDataFragment:function(a){var e=u.pageSize,t=u.dataSource,o=this.getTotalNumber(),i=e*(a-1)+1,n=Math.min(a*e,o);return t.slice(i-1,n)},getTotalNumber:function(){return this.model.totalNumber||u.totalNumber||0},getTotalPage:function(){return Math.ceil(this.getTotalNumber()/u.pageSize)},getDataCache:function(a){this.model.dataCache||(this.model.dataCache={});var e=this.model.dataCache[a];return this.model.dataCache.length>100&&(this.model.dataCache={}),e},getLocator:function(a){var t;return"string"==typeof a?t=a:e.isFunction(a)?t=a():n('"locator" is incorrect. (String | Function)'),t},filterDataByLocator:function(a){var t,o=this.getLocator(u.locator);if(i.isObject(a)){try{e.each(o.split("."),(function(e,o){t=(t||a)[o]}))}catch(a){}t?i.isArray(t)||n("dataSource."+o+" must be an Array."):n("dataSource."+o+" is undefined.")}return t||a},parseDataSource:function(a,t){var o=this;i.isObject(a)?t(u.dataSource=o.filterDataByLocator(a)):i.isArray(a)?t(u.dataSource=a):e.isFunction(a)?u.dataSource((function(a){i.isArray(a)||n('The parameter of "done" Function should be an Array.'),o.parseDataSource.call(o,a,t)})):"string"==typeof a?(/^https?|file:/.test(a)&&(u.ajaxDataType="jsonp"),t(a)):n('Unexpected type of "dataSource".')},callHook:function(t){var o,i=c.data("pagination"),n=Array.prototype.slice.apply(arguments);return n.shift(),u[t]&&e.isFunction(u[t])&&!1===u[t].apply(a,n)&&(o=!1),i&&i.hooks&&i.hooks[t]&&e.each(i.hooks[t],(function(e,t){!1===t.apply(a,n)&&(o=!1)})),!1!==o},observer:function(){var a=this,t=a.model.el;c.on(o+"go",(function(t,o,i){(o=parseInt(e.trim(o)))&&(e.isNumeric(o)||n('"pageNumber" is incorrect. (Number)'),a.go(o,i))})),t.delegate(".J-paginationjs-page","click",(function(t){var o=e(t.currentTarget),i=e.trim(o.attr("data-num"));if(i&&!o.hasClass(u.disableClassName)&&!o.hasClass(u.activeClassName))return!1!==a.callHook("beforePageOnClick",t,i)&&(a.go(i),a.callHook("afterPageOnClick",t,i),!!u.pageLink&&void 0)})),t.delegate(".J-paginationjs-previous","click",(function(t){var o=e(t.currentTarget),i=e.trim(o.attr("data-num"));if(i&&!o.hasClass(u.disableClassName))return!1!==a.callHook("beforePreviousOnClick",t,i)&&(a.go(i),a.callHook("afterPreviousOnClick",t,i),!!u.pageLink&&void 0)})),t.delegate(".J-paginationjs-next","click",(function(t){var o=e(t.currentTarget),i=e.trim(o.attr("data-num"));if(i&&!o.hasClass(u.disableClassName))return!1!==a.callHook("beforeNextOnClick",t,i)&&(a.go(i),a.callHook("afterNextOnClick",t,i),!!u.pageLink&&void 0)})),t.delegate(".J-paginationjs-go-button","click",(function(i){var n=e(".J-paginationjs-go-pagenumber",t).val();if(!1===a.callHook("beforeGoButtonOnClick",i,n))return!1;c.trigger(o+"go",n),a.callHook("afterGoButtonOnClick",i,n)})),t.delegate(".J-paginationjs-go-pagenumber","keyup",(function(i){if(13===i.which){var n=e(i.currentTarget).val();if(!1===a.callHook("beforeGoInputOnEnter",i,n))return!1;c.trigger(o+"go",n),e(".J-paginationjs-go-pagenumber",t).focus(),a.callHook("afterGoInputOnEnter",i,n)}})),c.on(o+"previous",(function(e,t){a.previous(t)})),c.on(o+"next",(function(e,t){a.next(t)})),c.on(o+"disable",(function(){a.disable()})),c.on(o+"enable",(function(){a.enable()})),c.on(o+"refresh",(function(e,t){a.refresh(t)})),c.on(o+"show",(function(){a.show()})),c.on(o+"hide",(function(){a.hide()})),c.on(o+"destroy",(function(){a.destroy()}));var i=Math.max(a.getTotalPage(),1),r=u.pageNumber;a.isDynamicTotalNumber&&(r=1),u.triggerPagingOnInit&&c.trigger(o+"go",Math.min(r,i))}};if(c.data("pagination")&&!0===c.data("pagination").initialized){if(e.isNumeric(r))return c.trigger.call(this,o+"go",r,arguments[1]),this;if("string"==typeof r){var d=Array.prototype.slice.apply(arguments);switch(d[0]=o+d[0],r){case"previous":case"next":case"go":case"disable":case"enable":case"refresh":case"show":case"hide":case"destroy":c.trigger.apply(this,d);break;case"getSelectedPageNum":return c.data("pagination").model?c.data("pagination").model.pageNumber:c.data("pagination").attributes.pageNumber;case"getTotalPage":return Math.ceil(c.data("pagination").model.totalNumber/c.data("pagination").model.pageSize);case"getSelectedPageData":return c.data("pagination").currentPageData;case"isDisabled":return!0===c.data("pagination").model.disabled;default:n("Unknown action: "+r)}return this}s=c,l=["go","previous","next","disable","enable","refresh","show","hide","destroy"],e.each(l,(function(a,e){s.off(o+e)})),s.data("pagination",{}),e(".paginationjs",s).remove()}else i.isObject(r)||n("Illegal options");return function(a){a.dataSource||n('"dataSource" is required.');"string"==typeof a.dataSource?void 0===a.totalNumberLocator?void 0===a.totalNumber?n('"totalNumber" is required.'):e.isNumeric(a.totalNumber)||n('"totalNumber" is incorrect. (Number)'):e.isFunction(a.totalNumberLocator)||n('"totalNumberLocator" should be a Function.'):i.isObject(a.dataSource)&&(void 0===a.locator?n('"dataSource" is an Object, please specify "locator".'):"string"==typeof a.locator||e.isFunction(a.locator)||n(a.locator+" is incorrect. (String | Function)"));void 0===a.formatResult||e.isFunction(a.formatResult)||n('"formatResult" should be a Function.')}(u),g.initialize(),this},e.fn[t].defaults={dataCache:{},canAjax:!0,totalNumber:0,pageNumber:1,pageSize:10,pageRange:2,showPrevious:!0,showNext:!0,showPageNumbers:!0,showNavigator:!1,showGoInput:!1,showGoButton:!1,pageLink:"",prevText:"&laquo;",nextText:"&raquo;",ellipsisText:"...",goButtonText:"Go",classPrefix:"paginationjs",activeClassName:"active",disableClassName:"disabled",inlineStyle:!0,formatNavigator:"<%= currentPage %> / <%= totalPage %>",formatGoInput:"<%= input %>",formatGoButton:"<%= button %>",position:"bottom",autoHidePrevious:!1,autoHideNext:!1,triggerPagingOnInit:!0,hideWhenLessThanOnePage:!1,showFirstOnEllipsisShow:!0,showLastOnEllipsisShow:!0,callback:function(){}},e.fn.addHook=function(a,t){arguments.length<2&&n("Missing argument."),e.isFunction(t)||n("callback must be a function.");var o=e(this),i=o.data("pagination");i||(o.data("pagination",{}),i=o.data("pagination")),!i.hooks&&(i.hooks={}),i.hooks[a]=i.hooks[a]||[],i.hooks[a].push(t)},e[t]=function(a,t){var o;if(arguments.length<2&&n("Requires two parameters."),(o="string"!=typeof a&&a instanceof jQuery?a:e(a)).length)return o.pagination(t),o};var i={};function n(a){throw new Error("Pagination: "+a)}e.each(["Object","Array","String"],(function(a,e){i["is"+e]=function(a){return function(a,e){return("object"==(e=typeof a)?null==a?"null":Object.prototype.toString.call(a).slice(8,-1):e).toLowerCase()}(a)===e.toLowerCase()}})),"function"==typeof define&&define.amd&&define((function(){return e}))}(this,window.jQuery);